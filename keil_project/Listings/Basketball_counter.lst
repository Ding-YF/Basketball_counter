C51 COMPILER V9.60.0.0   BASKETBALL_COUNTER                                                10/14/2021 11:34:33 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE BASKETBALL_COUNTER
OBJECT MODULE PLACED IN .\Objects\Basketball_counter.obj
COMPILER INVOKED BY: D:\rj\Keil_v5\C51\BIN\C51.EXE Basketball_counter.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRIN
                    -T(.\Listings\Basketball_counter.lst) TABS(2) OBJECT(.\Objects\Basketball_counter.obj)

line level    source

   1          #include <reg51.h>
   2          #define uint  unsigned int
   3          unsigned char table0[]={0x3f,0x06,0x5b,0x4f,0x66,0x6d,0x7d,0x07,0x7f,0x6f};
   4          char sec=12,min=0;
   5          char m=0;
   6          
   7          sbit HLA=P1^0;
   8          sbit HLB=P1^1;
   9          sbit HLC=P1^2;
  10          sbit BEEP=P1^4;
  11          
  12          void delayms(uint xms)
  13          {
  14   1        uint i,j;
  15   1        for(i=xms;i>0;i--)
  16   1          for(j=110;j>0;j--);
  17   1      
  18   1      }
  19          
  20          void display()
  21          {
  22   1          unsigned char secshi,secge,minshi,minge;
  23   1          secge=sec%10;
  24   1          secshi=sec/10;
  25   1          minge=min%10;
  26   1          minshi=min/10;
  27   1          HLA=0;HLB=0;HLC=0; //第1位
  28   1          P0=table0[minshi];
  29   1          delayms(10);
  30   1      
  31   1          HLA=1;HLB=0;HLC=0;  //第2位
  32   1          P0=table0[minge];
  33   1          delayms(10);
  34   1      
  35   1          HLA=0;HLB=1;HLC=0;  //第3位
  36   1          P0=table0[secshi];
  37   1          delayms(10);
  38   1      
  39   1          HLA=1;HLB=1;HLC=0;  //第4位
  40   1          P0=table0[secge];
  41   1          delayms(10);
  42   1      
  43   1      }
  44          
  45          void speak()
  46          {
  47   1          if (sec>=9&&sec<=10&&min==0)
  48   1              {
  49   2                  BEEP=!BEEP;
  50   2      //            delayms(2000);
  51   2      //            BEEP=1;
  52   2              }
  53   1      }
  54          
C51 COMPILER V9.60.0.0   BASKETBALL_COUNTER                                                10/14/2021 11:34:33 PAGE 2   

  55          void init()//初始化
  56          {
  57   1          TMOD=0x01;
  58   1          TH0=0x3c;
  59   1          TL0=0xb0;
  60   1          EA=1;
  61   1          ET0=1;
  62   1          TR0=1;
  63   1      }
  64          
  65          
  66          void Time_0() interrupt 1  //定时器0
  67          {
  68   1          TH0=0x3c;
  69   1          TL0=0xb0;
  70   1          m++;
  71   1          if (m>=20)
  72   1          {
  73   2              m=0;
  74   2              sec--;
  75   2              P2=~P2;
  76   2              if(sec<=0)
  77   2              {
  78   3                  min--;
  79   3                  sec=59;
  80   3                  if (min<0)
  81   3                  {
  82   4                  min=2;
  83   4                  sec=0;
  84   4                  }
  85   3              }
  86   2          }
  87   1      }
  88          
  89          
  90          void main()
  91          {
  92   1          init();
  93   1          P2=0x00;
  94   1        while(1)
  95   1        {
  96   2            display();
  97   2            speak();
  98   2        }
  99   1      } 
 100          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    301    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     13    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
